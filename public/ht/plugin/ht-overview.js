!function(R,l){"use strict";var b="ht",W=b+".graph.",r=R[b],$=r.graph,K=r.Default,z=r.Color,V=null,F="px",x=K.getInternal(),A=x.getPinchDist,y=K.preventDefault,C=K.getTouchCount,s=K.startDragging;x.addMethod(K,{overviewBackground:z.widgetBackground,overviewMaskBackground:z.transparent,overviewContentBorderColor:z.widgetBorder,overviewContentBackground:z.background},!0),$.Overview=function(o){var c=this,I=c._view=x.createView(1,c);c._canvas=x.createCanvas(I),I.style.background=K.overviewBackground,I.appendChild(c._mask=x.createDiv()),c.setGraphView(o),c.addListeners()},K.def(W+"Overview",l,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:K.overviewMaskBackground,_contentBorderColor:K.overviewContentBorderColor,_contentBackground:K.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(D){var p=this;if(p.gv!==D){var H=p.gv;p.gv=D,H&&(H.removeViewListener(p.handleGraphViewChanged,p),H.ump(p.handleGraphViewPropertyChanged,p)),D&&(D.addViewListener(p.handleGraphViewChanged,p),D.mp(p.handleGraphViewPropertyChanged,p)),p.fp("graphView",H,D),p.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(f){this._autoUpdate&&"validate"===f.kind&&this.redraw()},handleGraphViewPropertyChanged:function(N){("canvasBackground"===N.property||this.getFixToRect()&&("zoom"===N.property||"translateX"===N.property||"translateY"===N.property))&&this.redraw()},redraw:function(){var D=this;D._redraw||(D._redraw=1,D.iv(50))},validateImpl:function(){var T=this,I=T.gv,b=T._canvas,M=T.getWidth(),N=T.getHeight(),h=T._redraw,k=K.devicePixelRatio;if(I){var p=T._mask,c=p.style,y=I.getViewRect(),z=this.getFixToRect(),s=z?"boolean"==typeof z?I.getContentRect():z:I.getScrollRect(),l=s.x,E=s.y,S=s.width,v=s.height,C=T._rate=Math.max(S/M,v/N),Q=T._x=(M-S/C)/2,H=T._y=(N-v/C)/2;if(0!==y.width&&0!==y.height||T.hasRetry||(K.callLater(T.iv,T,V),T.hasRetry=!0),(M!==b.clientWidth||N!==b.clientHeight)&&(x.setCanvas(b,M,N),h=1),x.isSameRect(s,T._scrollRect)||(T._scrollRect=s,h=1),h){var d=x.initContext(b),Y=I.getDataModel(),$=Y.getBackground()||T._contentBackground,n=T._contentBorderColor;d.clearRect(0,0,M*k,N*k);var Z=Y.getBackground()&&Y.a("width")>0&&Y.a("height")>0;$&&!Z&&x.fillRect(d,Q*k,H*k,S/C*k,v/C*k,$),x.translateAndScale(d,-l/C+Q,-E/C+H,1/C),I._42(d),d.restore(),n&&x.drawBorder(d,n,Q*k,H*k,S/C*k,v/C*k)}c.background=T._maskBackground,c.left=Q+(y.x-l)/C+F,c.top=H+(y.y-E)/C+F,c.width=y.width/C+F,c.height=y.height/C+F,T._redraw=null}else if(h){var d=x.initContext(b);d.clearRect(0,0,M*k,N*k),d.restore(),T._redraw=null}},center:function(F){var w=this,N=w.gv;if(N){var J=N._zoom,Y=N._29I,o=w._rate,s=w._scrollRect,g=K.getLogicalPoint(F,w._canvas),S=s.x+(g.x-w._x)*o,_=s.y+(g.y-w._y)*o;N.setTranslate((Y.width/2-S)*J,(Y.height/2-_)*J)}},handle_mousedown:function(H){this.handle_touchstart(H)},handleWindowMouseUp:function(R){this.handleWindowTouchEnd(R)},handleWindowMouseMove:function(B){this.handleWindowTouchMove(B)},handle_mousewheel:function(l){this.handleScroll(l,l.wheelDelta)},handle_DOMMouseScroll:function(y){2===y.axis&&this.handleScroll(y,-y.detail)},handleScroll:function(P,h){if(y(P),this.gv){var L=this.gv;h>0?L.scrollZoomIn():0>h&&L.scrollZoomOut()}},handle_touchstart:function(i){if(y(i),this.gv&&K.isLeftButton(i)){var H=this,N=H.gv,c=C(i);1===c?K.isDoubleClick(i)&&N.isResettable()?N.reset():(H.center(i),s(H,i)):2===c&&(H._dist=A(i),s(H,i))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(K){if(this.gv){var y=this,v=y._dist,S=C(K);1===S?y.center(K):2===S&&v!=V&&y.gv.handlePinch(V,A(K),v)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);