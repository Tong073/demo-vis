!function(n){"use strict";var f="ht",Y=n[f],K=Y.Default,O=Math,J=(O.PI,O.sin,O.cos,O.atan2,O.sqrt,O.max),C=O.floor,m=(O.round,O.ceil),o=Y.Shape,w=(Y.Edge,Y.List),l=Y.Style,X=Y.graph,I=K.getInternal(),v=I.ui(),V=null,D="prototype",A=n.clearInterval,b=n.setInterval,h=function(d){var K=d.data,S=this.dm();if(K&&"add"===d.kind){var _=S.$1c,J=K instanceof o?"shape.":"edge.";_&&K.s(J+"dash.flow")&&_.indexOf(K)<0&&_.push(K)}"clear"===d.kind&&(S.$1c=[])},q=function(t){var H=t.property,X=t.data,f=t.newValue,h=this.dm().$1c,R=X instanceof o?"s:shape.dash.flow":"s:edge.dash.flow";if(h&&H===R)if(f)h.indexOf(X)<0&&h.push(X);else for(var l=h.length,E=0;l>E;E++)if(h[E]===X){h.splice(E,1);break}},s=X.GraphView[D],G=v.EdgeUI[D],$=v.ShapeUI[D],c=$._80o,P=G._80o,x=Y.DataModel[D],i=x.prepareRemove,u=s.setDataModel;l["edge.dash.flow.step"]==V&&(l["edge.dash.flow.step"]=3),l["shape.dash.flow.step"]==V&&(l["shape.dash.flow.step"]=3),x.prepareRemove=function(Z){i.call(this,Z);var O=Z._dataModel,w=O.$1c;if(w)for(var t=w.length,M=0;t>M;M++)if(w[M]===Z){w.splice(M,1);break}},s.setDataModel=function(m){var I=this,l=I._dataModel;if(l!==m){l&&(l.umm(h,I),l.umd(q,I),l.$1c=[]),m.mm(h,I),m.md(q,I);var Z=m.$1c=[];m.each(function(X){var Q=X instanceof o?"shape.":"edge.";X.s(Q+"dash.flow")&&Z.indexOf(X)<0&&Z.push(X)}),u.call(I,m)}},s.setDashFlowInterval=function(b){var Z=this,o=Z.$2c;Z.$2c=b,Z.fp("dashFlowInterval",o,b),Z.$3c!=V&&(A(Z.$3c),delete Z.$3c,Z.enableDashFlow(b))},s.getDashFlowInterval=function(){return this.$2c},s.$4c=function(){var g,s,f,S=this,i=S.tx(),H=S.ty(),k=S._zoom,e=S.getWidth(),X=S.getHeight(),N={x:-i/k,y:-H/k,width:e/k,height:X/k},d=S.dm().$1c,Q=S._56I,u=new w;if(d.forEach(function(T){Q[T.getId()]&&(g=S.getDataUI(T),g&&(f=g._79o(),f&&u.add(f)))}),0!==u.size()&&(u.each(function(J){K.intersectsRect(N,J)&&(s=K.unionRect(s,J))}),s&&(s&&(K.grow(s,J(1,1/k)),s.x=C(s.x*k)/k,s.y=C(s.y*k)/k,s.width=m(s.width*k)/k,s.height=m(s.height*k)/k,s=K.intersection(N,s)),s))){var v=S._canvas.getContext("2d");v.save(),v.lineCap=K.lineCap,v.lineJoin=K.lineJoin;var t=K.devicePixelRatio,T=s.x,F=s.y,c=s.width,G=s.height;T=Math.floor((T*k+i)*t),F=Math.floor((F*k+H)*t),c=Math.ceil(c*k*t)+1,G=Math.ceil(G*k*t)+1,s.x=(T/t-i)/k,s.y=(F/t-H)/k,s.width=c/t/k,s.height=G/t/k,v.beginPath(),v.rect(T,F,c,G),v.clip(),v.clearRect(T,F,c,G),I.translateAndScale(v,i,H,k),S.$5c(v,s),v.restore()}},s.$5c=function(W,v){var X,N,a=this;a._93db(W),a.each(function(H){a._56I[H._id]&&(X=a.getDataUI(H),X&&(N=X._79o(),(!v||K.intersectsRect(v,N))&&(X.$7c=!0,X._42(W),delete X.$7c)))}),a._92db(W)},s.enableDashFlow=function(T){var E=this;E.$3c==V&&(E.$3c=b(function(){E.$4c()},T||E.$2c||50))},s.disableDashFlow=function(){var t=this;A(t.$3c),delete t.$3c};var E=function(){var Z=this,X=Z._data,u=X instanceof o?"shape.":"edge.",J=X.s(u+"dash.pattern"),A=X.s(u+"dash.flow.reverse");if(J&&X.s(u+"dash")&&X.s(u+"dash.flow")&&Z.$7c){var c=Z.s(u+"dash.offset")||0,E=X.s(u+"dash.flow.step"),Q=X.getStyleMap(),t=0;J.forEach(function($){t+=$}),A&&(E=-E),c-=E,c%=t,Q||(X._styleMap=Q={}),Q[u+"dash.offset"]=c}};G._80o=function(X){P.call(this,X),E.call(this)},$._80o=function(S){c.call(this,S),E.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);