!function(x,r,c){"use strict";var g="px",w="0",j="innerHTML",M="className",D=ht.Default,N=ht.Color,E=ht.Node,l="position",V="top",R="left",I=D.animate,F=D.getInternal(),Y="width",w="0",e="none",b="max-height",J="font",K="background",B="border-box",n="user-select",Q="box-sizing",P="overflow",v=D.isTouchable,W=D.isTouchEvent,F=D.getInternal(),X=N.titleIconBackground,G=D.scrollBarInteractiveSize,i=/msie 9/.test(x.navigator?x.navigator.userAgent.toLowerCase():""),u=null,h=function(){return document},s=function(p){return h().createElement(p)},Z=function(){return s("div")},C=function(){var y=Z(),q=y.style;return q.msTouchAction=e,q.cursor="default",v&&q.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",u),q.position="absolute",q.left=w,q.top=w,y},k=function(){return s("canvas")},L=function(){return document.body},U=function(T,W,g){T.style.setProperty(W,g,u)},d=function(u,R){u.style.removeProperty(R)},a=function(V,J,S){D.def(ht.widget[V],J,S)},p=function(L,p){L.appendChild(p)},H=function(z,r){z.removeChild(r)},z=F.addEventListener;F.removeEventListener,F.addMethod(D,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:X,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:X}]},paletteTitleLabelColor:D.labelSelectColor,paletteTitleLabelFont:D.labelFont,paletteContentLabelFont:D.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:D.widgetTitleHeight,paletteTitleBackground:N.titleBackground,paletteTitleHoverBackground:N.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:c,paletteItemHoverBorderColor:N.highlight,paletteItemSelectBackground:N.highlight},!0);var o=".palette-item:hover{border: 1px solid "+D.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+D.paletteTitleHoverBackground+" !important}",T=document.createElement("style");v||(T.styleSheet?T.styleSheet.cssText=o:T.appendChild(h().createTextNode(o))),h().getElementsByTagName("head")[0].appendChild(T);var A=function(n){var Z=this;Z.$22h=n,Z.addListeners()};D.def(A,r,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var O=this;O.$36h&&L().removeChild(O.$36h),O.$23h=O.$24h=O.$25h=O.$35h=O.$36h=u},handle_touchstart:function(h){for(var x,O=this,e=O.$22h,j=h.target,r=e.sm(),E=e.dm(),S="palette-header",J="palette-header-tool",Q="palette-item",K=!1,t=!1,N=!1;j&&(j[M]||"").indexOf(S)<0&&(j[M]||"").indexOf(Q)<0;)j=j.parentNode;if(j&&j[M].indexOf(J)>=0?K=!0:j&&j[M].indexOf(S)>=0?N=!0:j&&j[M].indexOf(Q)>=0&&(t=!0),D.isLeftButton(h))if(O.$27h(h))O.$24h=D.getClientPoint(h),O.$25h=e.ty();else if(K){D.preventDefault(h),x=j.parentNode.$11h;var o=E.getDataById(x),z=o.s("tools")[j.toolIndex];z.action&&z.action.call(e)}else if(N){D.preventDefault(h),x=j.$11h;var o=E.getDataById(x);o.isExpanded()?o.setExpanded(!1):o.setExpanded(!0)}else if(t){x=j.$11h;var l=E.getDataById(x);r.ss(l),e.handleDragAndDrop&&(D.preventDefault(h),l.s("draggable")&&(e.handleDragAndDrop(h,"prepare"),O.$35h=0)),l.s("draggable")||(D.preventDefault(h),O.$24h=D.getClientPoint(h),O.$25h=e.ty())}else D.preventDefault(h),O.$24h=D.getClientPoint(h),O.$25h=e.ty();else O.$26h(h)},handle_mousedown:function(Q){this.handle_touchstart(Q)},handle_mousewheel:function(N){this.handleScroll(N,N.wheelDelta/40,N.wheelDelta!==N.wheelDeltaX)},handle_DOMMouseScroll:function(y){this.handleScroll(y,-y.detail,1)},handleScroll:function(i,$,B){var y=this.$22h;D.preventDefault(i),B&&y._41o()&&y.ty(y.ty()+20*$)},handle_mouseup:function(Y){this.handle_touchend(Y)},handle_touchend:function(V){var g=this;g.$37h(V),g.$26h(V)},handleWindowMouseUp:function(f){this.handleWindowTouchEnd(f)},handleWindowTouchEnd:function(K){var H=this;H.$37h(K),H.$26h(K)},$37h:function(y){var N=this,t=N.$22h;2===N.$35h&&(N.$35h=3,t.handleDragAndDrop(y,"end"))},handleWindowMouseMove:function(v){this.handleWindowTouchMove(v)},handleWindowTouchMove:function(r){var j=this,m=j.$22h,$=j.$23h,o=j.$24h,H=j.$25h,f=D.getClientPoint(r),k=m._29I,N=j.$36h;if(1===j.$35h||2===j.$35h){if(j.$35h=2,m.handleDragAndDrop(r,"between"),W(r)){var B=r.touches[0];r=B?B:r.changedTouches[0]}N.style.left=r.pageX-parseInt(N.width)/2+g,N.style.top=r.pageY-parseInt(N.height)/2+g}else"p"===$?m.ty(H+f.y-o.y):"v"===$&&m.ty(H+(o.y-f.y)/k.height*m._59I)},handle_mousemove:function(h){this.handle_touchmove(h)},handle_touchmove:function(C){if(!D.isDragging()&&D.isLeftButton(C)){var n=this,l=n.$22h,v=n.$27h(C);if(n.$24h){if(!n.$23h){if(D.getDistance(D.getClientPoint(C),n.$24h)<2)return;n.$23h=v?"v":"p",D.startDragging(n,C)}}else if(v)l._43o();else if(0===n.$35h){if(n.$35h=1,l.handleDragAndDrop(C,"begin"),D.startDragging(n,C),W(C)){var o=C.touches[0];C=o?o:C.changedTouches[0]}var q=n.$36h=new Image,y=l.$10h[l.sm().ld().getId()].querySelector(".image-box"),t=parseInt(y.style.width),e=parseInt(y.style.height);q.draggable=!1,q.src=y.toDataURL(),q.width=t,q.height=e,q.style.position="absolute",q.style.left=C.pageX-t/2+g,q.style.top=C.pageY-e/2+g,L().appendChild(q)}}},$27h:function(e){var s=this.$22h,O=s.getView(),c=O.getBoundingClientRect(),l=s._29I,n=e.clientX-c.left+O.scrollLeft;return s._41o()&&l.x+l.width-n<G}}),ht.widget.Palette=function(I){var m=this,c=m._view=F.createView(null,m);m.$9h={},m.$10h={},m.$4h={},m._29I={x:0,y:0,width:0,height:0},m._59I=0,m.dm(I?I:new ht.DataModel),c[M]="ht-widget-palette",m.$29h=new A(m),U(c,K,D.paletteContentBackground),U(c,P,"auto"),U(c,Q,B),U(c,"-moz-"+Q,B),U(c,"-webkit-"+n,e),U(c,"-moz-"+n,e),U(c,"-ms-"+n,e),U(c,n,e),U(c,"position","absolute"),U(c,"overflow","hidden"),p(c,m._79O=C()),z(c,"dragstart",function(E){E.dataTransfer&&(E.dataTransfer.setData("Text","nodeid:"+E.target.$11h),E.dataTransfer.effectAllowed="all",m.$29h.$26h())})},a("Palette",r,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:D.autoHideScrollBar,_scrollBarSize:D.scrollBarSize,_scrollBarColor:D.scrollBarColor,getViewRect:function(){return this._29I},ty:function(Q){return Q==u?this.getTranslateY():(this.setTranslateY(Q),void 0)},setTranslateY:function(j){if(this.$32h==u){var C=this,c=C.$33h(j),E=C.$30h;C.$30h=c,C.fp("translateY",E,c)}},getTranslateY:function(){return this.$30h},setLayout:function($){var c,D,h=this,S=h._layout;h._layout=$,"smallicons"===$?c=D=20:"iconsonly"===$?c=D=50:(c=70,D=50),h.setItemImageWidth(c),h.setItemImageHeight(D),h.setItemImagePadding(4),h.fp("layout",S,$)},getDataAt:function(w){for(var x=w.target;x&&x.$11h==u;)x=x.parentNode;return x&&x.$11h!=u?this.getDataModel().getDataById(x.$11h):void 0},$20h:function(){var M=16;return v&&(M*=1.2),M},$19h:function(){return D.paletteTitleHeight},$18h:function(){var J=D.paletteSeparatorWidth,b=D.paletteTitleBackground,M=D.paletteSeparatorColor||D.brighter(b);return J+g+" solid "+M},$17h:function(I){U(I,"cursor","pointer"),U(I,"display","inline-block"),U(I,"margin-right",(v?8:4)+g),U(I,"vertical-align",V)},$1h:function(_){var S=this,N=Z(),x=Z(),O=s("span");N[M]="palette-header",U(N,l,"relative"),U(N,K,D.paletteTitleBackground),U(N,"color",D.paletteTitleLabelColor),U(N,V,w),U(N,Q,B),U(N,"-moz-"+Q,B),U(N,"padding","0 5px 0 0"),U(N,"border-top",S.$18h()),U(N,Y,"100%"),U(N,"cursor","pointer"),U(N,"white-space","nowrap"),U(N,P,"hidden"),U(N,J,D.paletteTitleLabelFont),U(N,"line-height",S.$19h()+g),N.$11h=_.getId();var i=k(),y=S.$19h(),m=S.$20h();S.$17h(i),F.setCanvas(i,m,y),p(N,i);var A=_.s("tools");if(A)for(var e=0;e<A.length;e++){var t=k();S.$17h(t),F.setCanvas(t,m,y),t[M]="palette-header-tool palette-header-tool"+_.getId()+"-"+e,t.style.position="absolute",t.style.right=(m+10)*e+"px",t.toolIndex=e,p(N,t)}return i[M]="palette-toggle-icon-"+_.getId(),x[M]="palette-content",U(x,"max-height",0+g),U(x,J,D.paletteContentLabelFont),U(x,P,"hidden"),x.$11h=_.getId(),S.$9h[_.getId()]=x,O[j]=_.getName(),U(O,J,D.paletteTitleLabelFont),p(N,i),p(N,O),[N,x]},$2h:function(h){var I=this,f=I._layout,b=i&&h.s("draggable")?s("a"):Z(),L=k(),o=Z(),J=h.getName()||"",$=h.s("title")||h.getToolTip()||J,O=I._itemMargin;L[M]="image-box";var E=I.getItemImageWidth(),Q=I.getItemImageHeight();return F.setCanvas(L,E,Q),p(b,L),o[j]=J,o[M]="label-box","iconsonly"!==f&&p(b,o),b[M]="palette-item",U(b,"vertical-align",V),U(b,"cursor","pointer"),U(b,"border-radius",5+g),U(b,"border","1px solid transparent"),U(b,"text-align","center"),U(b,"display","inline-block"),U(b,"margin-left",O+g),U(b,"margin-top",O+g),U(b,"color",D.paletteContentLabelColor),"smallicons"===f?(U(L,"vertical-align","middle"),U(b,"margin-left",2+g),U(b,"margin-top",2+g),U(b,"padding",2+g),U(b,"text-align",R),U(o,"display","inline-block"),U(o,"min-width",I.$21h+I._itemMargin+g)):"largeicons"===f&&(U(o,"max-width",E+g),U(o,"overflow","hidden")),b.$11h=h.getId(),$&&(b.title=$),h.s("draggable")&&!I.handleDragAndDrop&&(i?(b.href="#",U(b,"text-decoration",e)):b.draggable="true"),b},$16h:function(z,N,s,P){var y=F.initContext(z);F.translateAndScale(y,0,0,1),y.clearRect(0,0,s,s);var _=(s-P)/2;D.drawStretchImage(y,D.getImage(N),"fill",0,_,P,P),y.restore()},$15h:function(x){var h=this,$=x.getId(),O=h._view.querySelector(".palette-toggle-icon-"+$),q=x.isExpanded()?D.paletteCollapseIcon:D.paletteExpandIcon;if(O&&q){var K=h.$19h(),H=h.$20h();h.$16h(O,q,K,H)}},_drawToolsIcon:function(N){var V=this,$=N.s("tools");if($)for(var T=0;T<$.length;T++){var L=V._view.querySelector(".palette-header-tool"+N.getId()+"-"+T),A=$[T].icon,D=V.$19h(),e=V.$20h();V.$16h(L,A,D,e)}},$14h:function(Z){var x=this,h=Z.getId(),o=x.$10h[h].querySelector(".image-box"),e=Z.getImage(),I=Z.s("image.stretch");if(o&&e){var j=F.initContext(o),v=x.getItemImagePadding();v="smallicons"===x._layout?v/2:v;var s=x.getItemImageWidth()-2*v,d=x.getItemImageHeight()-2*v;F.translateAndScale(j,0,0,1),j.clearRect(0,0,s,d),D.drawStretchImage(j,D.getImage(e),I,v,v,s,d,Z,x,x.getBodyColor(Z)),j.restore()}},validateImpl:function(){var m,i,n,L=this,A=L.$9h,B=L._layout,Z=L.$10h,e=L.$4h,T=L._view,l=L.dm();if(L.$13h&&(delete L.$13h,e={},l.each(function(g){e[g.getId()]=g})),"smallicons"===B)for(var W in e){var o=e[W];if(o instanceof E){var X=o.getName()||"",Q=D.getTextSize(D.paletteContentLabelFont,X).width;L.$21h!=u&&L.$21h>Q||(L.$21h=Q)}}for(var W in e){n=e[W];var f,y;if(l.contains(n)){if(n instanceof ht.Group){var P,z=L.$1h(n),K=Z[n.getId()];K&&(P=K.nextSibling,H(T,P),H(T,K)),i=l.getSiblings(n).indexOf(n);var t=T.children[2*i]||L._79O;t&&t.parentNode?(T.insertBefore(z[0],t),T.insertBefore(P||z[1],t)):(T.appendChild(z[0]),T.appendChild(P||z[1])),Z[n.getId()]=z[0],m=A[n.getId()]=P||z[1],y=n.$12h;var k=n.s("promptText");y||(n.$12h=s("div"),n.$12h[j]=k||"",y=n.$12h),0===n.getChildren().size()?m.contains(y)||p(m,y):m.contains(y)&&H(m,y)}else if(f=n.getParent()){var r=L.$2h(n),$=Z[n.getId()];m=A[f.getId()],$&&H($.parentNode,$),i=l.getSiblings(n).indexOf(n);var O=m.children[i];O?m.insertBefore(r,O):p(m,r),Z[n.getId()]=r,L.$14h(n)}}else{var S=Z[n.getId()],R=S.parentNode;if(n instanceof ht.Group){var V=S.nextSibling;H(T,S),H(T,V),delete A[n.getId()]}else H(R,S),0===R.children.length&&(f=l.getDataById(R.$11h),f&&(y=f.$12h,y&&!R.contains(y)&&p(R,y)));delete Z[n.getId()]}}L.$4h={};var G=function(){var n=L._59I,I=0;L.$32h!=u&&(clearInterval(L.$32h),I=0,delete L.$32h),L.$32h=setInterval(function(){L.$31h(),n===L._59I?(I++,I>=2&&(clearInterval(L.$32h),delete L.$32h)):(I=0,n=L._59I)},30)};for(var M in A)if(m=A[M],n=l.getDataById(A[M].$11h),L.$15h(n),L._drawToolsIcon(n),n.isExpanded()){if(m.style.maxHeight===0+g){var F=m.scrollHeight+L._itemMargin+g;I(m).duration(200).set(b,F).set("padding-bottom",L._itemMargin+g).end(function(){return function(){G()}}(F))}else m.style.maxHeight=m.scrollHeight+g;m.style.paddingBottom=L._itemMargin+g}else m.style.maxHeight!==0+g&&I(m).duration(200).set(b,w).set("padding-bottom",w).end(function(){return function(){G()}}(m));L.$28h(),L.$31h()},$31h:function(){for(var E=this,i=E._view,c=0,N=i.children,b=0;b<N.length;b++){var H=N[b];H.className&&H.className.indexOf("palette-")>=0&&(c+=H.offsetHeight)}E._59I=c,E.$30h=E.$33h(E.ty());var a=E.ty();i.scrollTop=-a,E._29I={x:0,y:-a,width:i.clientWidth,height:i.clientHeight},U(E._79O,V,-a+g),E._93I()},$33h:function(c){var Q=this,k=Q._29I.height-Q._59I;return k>c&&(c=k),c>0?0:Math.round(c)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(b){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(b.property)<0&&this.redraw(),"translateY"===b.property&&(this.iv(),this._43o())},findDataByName:function(c){for(var q=this.dm().getDatas(),O=0;O<q.size();O++){var G=q.get(O);if(G.getName()===c)return G}},setDataModel:function(A){var j=this,m=j._dataModel,s=j._selectionModel;m!==A&&(m&&(m.umm(j.$6h,j),m.umd(j.$8h,j),m.umh(j.$7h,j),s||m.sm().ums(j.$28h,j)),j._dataModel=A,A.mm(j.$6h,j),A.md(j.$8h,j),A.mh(j.$7h,j),s?s._21I(A):A.sm().ms(j.$28h,j),j.sm().setSelectionMode("single"),j.fp("dataModel",m,A))},$6h:function(s){var o=this,K=o._view,d=s.data,t=o.$4h;"add"===s.kind?t[d.getId()]=d:"remove"===s.kind?t[d.getId()]=d:"clear"===s.kind&&(o.$10h={},o.$9h={},o.$4h={},K[j]=""),o.iv()},$7h:function(l){var t=this,s=l.data;t.$4h[s.getId()]=s,t.iv()},$8h:function(l){var e=this,D=l.data,r=l.property;"expanded"===r?e.iv():(e.$4h[D.getId()]=D,e.iv())},$28h:function(){var E,r=this,_=r.sm(),F="palette-item",m=_.ld();this.dm().each(function(W){E=r.$10h[W.getId()],E&&E[M].indexOf(F)>=0&&(W===m?U(E,K,D.paletteItemSelectBackground):d(E,K))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);